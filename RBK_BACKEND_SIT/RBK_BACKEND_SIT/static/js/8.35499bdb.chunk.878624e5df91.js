(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[8],{670:function(e,t,a){"use strict";a.r(t);var n=a(37),i=a(160),c=a(161),o=a(370),s=a(163),l=a(162),r=a(1),d=a(666),h=a.n(d),j=a(623),u=a.n(j),m=(a(624),a(618)),b=a(619),p=a(20),g=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loginData:{username:"",password:"",isAuthenticated:!1}},n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleChange",value:function(e){({})[e.target.name]=e.target.value}},{key:"handleSubmit",value:function(e){var t=this;u.a.defaults.xsrfCookieName="csrftoken",u.a.defaults.xsrfHeaderName="X-CSRFToken";e.preventDefault(),localStorage.clear();var a=this.getCookie("csrftoken"),i={username:this.state.loginData.username,password:this.state.loginData.password};console.log(i),u()({method:"post",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":a},url:"/api/accounts/login/",data:i}).then((function(e){if(e.data.token){console.log(e.data.token,"iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii");var a=e.data.token;localStorage.setItem("token",a);var i=Object(n.a)({},t.state.loginData);i.isAuthenticated=!0,t.setState({loginData:i}),console.log(t.state.loginData),localStorage.setItem("token","hello token try")}})).catch((function(e){console.log("Error: ",e),localStorage.setItem("token","hello token catch")}))}},{key:"getCookie",value:function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var i=h.a.trim(a[n]);if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}return console.log(t),t}},{key:"render",value:function(){var e=this.getCookie("csrftoken");return Object(p.jsxs)("div",{className:"c-app c-default-layout flex-row align-items-center",children:[Object(p.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:e}),Object(p.jsx)(m.k,{children:Object(p.jsx)(m.z,{className:"justify-content-center",children:Object(p.jsx)(m.j,{md:"8",children:Object(p.jsxs)(m.h,{children:[Object(p.jsx)(m.f,{className:"p-4",children:Object(p.jsx)(m.g,{children:Object(p.jsxs)(m.o,{onSubmit:this.handleSubmit,children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)("p",{className:"text-muted",children:"Sign In to your account"}),Object(p.jsxs)(m.v,{className:"mb-3",children:[Object(p.jsx)(m.w,{children:Object(p.jsx)(m.x,{children:Object(p.jsx)(b.a,{name:"cil-user"})})}),Object(p.jsx)(m.u,{type:"text",placeholder:"Username",name:"username",autoComplete:"username",onChange:this.handleChange})]}),Object(p.jsxs)(m.v,{className:"mb-4",children:[Object(p.jsx)(m.w,{children:Object(p.jsx)(m.x,{children:Object(p.jsx)(b.a,{name:"cil-lock-locked"})})}),Object(p.jsx)(m.u,{type:"password",placeholder:"Password",name:"password",autoComplete:"current-password",onChange:this.handleChange})]}),Object(p.jsx)(m.z,{children:Object(p.jsx)(m.j,{xs:"6",children:Object(p.jsx)(m.e,{color:"primary",className:"px-4",onClick:this.handleSubmit,children:"Login"})})})]})})}),Object(p.jsx)(m.f,{className:"text-white bg-primary py-5 d-md-down-none",style:{width:"44%"},children:Object(p.jsx)(m.g,{className:"text-center",children:Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:""})})})})]})})})})]})}}]),a}(r.Component);t.default=g}}]);
//# sourceMappingURL=8.35499bdb.chunk.js.map